function _toConsumableArray(r){if(Array.isArray(r)){for(var a=0,e=Array(r.length);a<r.length;a++)e[a]=r[a];return e}return Array.from(r)}function createPngDataTable(){for(var r=new Int32Array(256),a=0;a<256;a++){for(var e=a,n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;r[a]=e}return r}function calcCrc(r){var a=-1;pngDataTable||(pngDataTable=createPngDataTable());for(var e=0;e<r.length;e++)a=pngDataTable[255&(a^r[e])]^a>>>8;return-1^a}var pngDataTable=void 0,PNG="image/png",JPEG="image/jpeg",b64PhysSignature1="AAlwSFlz",b64PhysSignature2="AAAJcEhZ",b64PhysSignature3="AAAACXBI",_P="p".charCodeAt(0),_H="H".charCodeAt(0),_Y="Y".charCodeAt(0),_S="s".charCodeAt(0);function changeDpiBlob(r,a){var e=r.slice(0,33);return new Promise(function(n,t){var i=new FileReader;i.onload=function(){var e=new Uint8Array(i.result),t=r.slice(33),o=changeDpiOnArray(e,a,r.type);n(new Blob([o,t],{type:r.type}))},i.readAsArrayBuffer(e)})}function changeDpiDataUrl(r,a){var e=r.split(","),n=e[0],t=e[1],i=void 0,o=void 0,c=!1;if(-1!==n.indexOf("image/png")){i=PNG;var g=detectPhysChunkFromDataUrl(t);g>=0?(o=4*Math.ceil((g+28)/3),c=!0):o=44}-1!==n.indexOf("image/jpeg")&&(i=JPEG,o=24);for(var u=t.substring(0,o),f=t.substring(o),h=atob(u),s=new Uint8Array(h.length),A=0;A<s.length;A++)s[A]=h.charCodeAt(A);var l=changeDpiOnArray(s,a,i,c);return void 0!==l?[n,",",btoa(String.fromCharCode.apply(String,_toConsumableArray(l))),f].join(""):r}function detectPhysChunkFromDataUrl(r){var a=r.indexOf(b64PhysSignature1);return-1===a&&(a=r.indexOf(b64PhysSignature2)),-1===a&&(a=r.indexOf(b64PhysSignature3)),a}function searchStartOfPhys(r){for(var a=r.length-1;a>=4;a--)if(9===r[a-4]&&r[a-3]===_P&&r[a-2]===_H&&r[a-1]===_Y&&r[a]===_S)return a-3}function changeDpiOnArray(r,a,e,n){if(e===JPEG)return r[13]=1,r[14]=a>>8,r[15]=255&a,r[16]=a>>8,r[17]=255&a,r;if(e===PNG){var t=new Uint8Array(13);a*=39.3701,t[0]=_P,t[1]=_H,t[2]=_Y,t[3]=_S,t[4]=a>>>24,t[5]=a>>>16,t[6]=a>>>8,t[7]=255&a,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;var i=calcCrc(t),o=new Uint8Array(4);if(o[0]=i>>>24,o[1]=i>>>16,o[2]=i>>>8,o[3]=255&i,n){var c=searchStartOfPhys(r);return r.set(t,c),r.set(o,c+13),r}var g=new Uint8Array(4);g[0]=0,g[1]=0,g[2]=0,g[3]=9;var u=new Uint8Array(54);return u.set(r,0),u.set(g,33),u.set(t,37),u.set(o,50),u}}